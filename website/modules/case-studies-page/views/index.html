{# modules/articles-page/views/index.html #} {% extends "layout.html" %} {%
import '@apostrophecms/pager:macros.html' as pager with context %} {% set tags =
data.piecesFilters.tags %} {% block main %}
<div class="cs_container">
  <div class="cs_content">
    <div class="page-main_content">{% area data.page, 'main' %}</div>
    <form class="cs_search-form" action="" method="GET">
      <input
        class="cs_search-input"
        type="text"
        name="search"
        placeholder="Search here..."
        value="{{ data.query.search | safe }}"
      />
      <button type="submit" class="cs_search-button">Search</button>
      {% if data.query.search %}
      <button
        class="cs_clear-search-button"
        type="button"
        onclick="window.location.href='{{ data.url | build({search: null}) }}'"
      >
        Clear Search
      </button>
      {% endif %}
    </form>

    <div class="cs_list">
      <div class="tags-filter">
        <p class="tags-title">Tags:</p>
        <ul class="tags-list">
          {% for tag in tags %} {% if data.query.tags and tag.value in
          data.query.tags %}
          <li class="tag-item active">
            <a
              class="tag-link"
              href="{{ data.url | build({}, { tags: { $pull: tag.value } }) }}"
            >
              {{ tag.label }}
            </a>
          </li>
          {% else %}
          <li class="tag-item">
            <a
              class="tag-link"
              href="{{ data.url | build({}, { tags: { $addToSet: tag.value } }) }}"
            >
              {{ tag.label }}
            </a>
          </li>
          {% endif %} {% endfor %}
          <li class="tag-item clear-all">
            <a class="clear-all-link" href="{{ data.page._url }}">Clear all</a>
          </li>
        </ul>
      </div>

      <div class="cs_grid">
        {% for article in data.pieces %}
        <a href="{{ article._url }}" class="cs_card">
          {% set banner = apos.image.first(article.heroImage) %} {% if banner is
          defined %}
          <img
            class="cs_image"
            loading="lazy"
            src="{{ apos.attachment.url(banner, { size: data.options.size or 'full' }) }}"
            alt="{{ banner._alt or '' }}"
            width="{{ apos.attachment.getWidth(banner) }}"
            height="{{ apos.attachment.getHeight(banner) }}"
          />
          {% else %}
          <div class="placeholder-image-container">
            <img
              class="placeholder-image"
              loading="lazy"
              src="/images/logo.svg"
              alt="Placeholder banner for {{ article.title }}"
              width="160"
              height="50"
            />
          </div>
          {% endif %}
          <div class="cs_details">
            <h3 class="cs_title">{{ article.title }}</h3>
            {% if article.summary %}
            <p class="cs_summary">{{ article.summary }}</p>
            {% endif %}
          </div>
        </a>
        {% endfor %}
      </div>
    </div>

    <div class="pagination-container">
      {{ pager.render({ page: data.currentPage, total: data.totalPages, class:
      'cs-pager' }, data.url) }}
    </div>
  </div>
</div>
{% endblock main %}
